function isNotBlank(t){return void 0!=t&&null!=t&&"null"!=t&&"undefined"!=t}function isDigital(t){return/^\d$/.test(t)}function textLimit(t,e,o){if(!t)return!1;var n=t.trim().length;return!(n<e||n>o)}function testEmail(t){return/^[a-zA-Z0-9]+@[a-zA-Z0-9]+.[a-z][a-z.]{2,8}$/.test(t)}function testGeolocation(){return navigator.geolocation?(testGeolocation=function(){return!0})():(testGeolocation=function(){return!1})()}function testStorage(){return testSessionStorage()||testLocalStorage()}function testSessionStorage(){return(testSessionStorage=window.sessionStorage?function(){return!0}:function(){return!1})()}function testLocalStorage(){return(testLocalStorage=window.localStorage?function(){return!0}:function(){return!1})()}function json(v){return eval("("+v+")")}function testPhone(t){return/^1\d{10}$/.test(t)}function createSpinner(){var t={lines:12,length:6,width:4,radius:10,color:"#333",speed:1,trail:60,shadow:!1,hwaccel:!1};return new Spinner(t)}function urlEncode(t,e,arguments){var o="",n=t.split(".");return o+=n[0],arguments&&arguments.length&&arguments.forEach(function(t){o+="-",o+=t&&-1!=t&&"-1"!=t?t:"0"}),o=o+"."+n[1],e&&(o=/\?/.test(o)?o+"&sid="+e:o+"?sid="+e),o}function hideWait(t,e){e.stop(),t.hide(),t.next().show(),$("header").show(),$("footer").show()}function showWait(t,e){t.show(),t.next().hide(),$("header").hide(),$("footer").hide(),e.spin(t[0])}function createPicMove(t,e,o){var n=function(t){return"string"==typeof t?document.getElementById(t):t},i=function(t,e){for(var o in e)t[o]=e[o];return t},a=function(t){return t.currentStyle||document.defaultView.getComputedStyle(t,null)},s=function(t,e){var o=Array.prototype.slice.call(arguments).slice(2);return function(){return e.apply(t,o.concat(Array.prototype.slice.call(arguments)))}},r={Quart:{easeOut:function(t,e,o,n){return-o*((t=t/n-1)*t*t*t-1)+e}},Back:{easeOut:function(t,e,o,n,i){return void 0==i&&(i=1.70158),o*((t=t/n-1)*t*((i+1)*t+i)+1)+e}},Bounce:{easeOut:function(t,e,o,n){return(t/=n)<1/2.75?o*(7.5625*t*t)+e:t<2/2.75?o*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?o*(7.5625*(t-=2.25/2.75)*t+.9375)+e:o*(7.5625*(t-=2.625/2.75)*t+.984375)+e}}},c=function(t,e,o,i){this._slider=n(e),this._container=n(t),this._timer=null,this._count=Math.abs(o),this._target=0,this._t=this._b=this._c=0,this.Index=0,this.SetOptions(i),this.Auto=!!this.options.Auto,this.Duration=Math.abs(this.options.Duration),this.Time=Math.abs(this.options.Time),this.Pause=Math.abs(this.options.Pause),this.Tween=this.options.Tween,this.onStart=this.options.onStart,this.onFinish=this.options.onFinish;var s=!!this.options.Vertical;this._css=s?"top":"left";var r=a(this._container).position;"relative"==r||"absolute"==r||(this._container.style.position="relative"),this._container.style.overflow="hidden",this._slider.style.position="absolute",this.Change=this.options.Change?this.options.Change:this._slider[s?"offsetHeight":"offsetWidth"]/this._count};return c.prototype={SetOptions:function(t){this.options={Vertical:!0,Auto:!0,Change:0,Duration:50,Time:10,Pause:4e3,onStart:function(){},onFinish:function(){},Tween:r.Quart.easeOut},i(this.options,t||{})},Run:function(t){void 0==t&&(t=this.Index),t<0&&(t=this._count-1)||t>=this._count&&(t=0),this._target=-Math.abs(this.Change)*(this.Index=t),this._t=0,this._b=parseInt(a(this._slider)[this.options.Vertical?"top":"left"]),this._c=this._target-this._b,this.onStart(),this.Move()},Move:function(){clearTimeout(this._timer),this._c&&this._t<this.Duration?(this.MoveTo(Math.round(this.Tween(this._t++,this._b,this._c,this.Duration))),this._timer=setTimeout(s(this,this.Move),this.Time)):(this.MoveTo(this._target),this.Auto&&(this._timer=setTimeout(s(this,this.Next),this.Pause)))},MoveTo:function(t){this._slider.style[this._css]=t+"px"},Next:function(){this.Run(++this.Index)},Previous:function(){this.Run(--this.Index)},Stop:function(){clearTimeout(this._timer),this.MoveTo(this._target)}},new c(t,e,o,{Vertical:!1})}function bind(t,e){var o=Array.prototype.slice.call(arguments).slice(2);return function(){return e.apply(t,o.concat(Array.prototype.slice.call(arguments)))}}function userLocation(t,e){function o(e,o){var n="&#33719;&#21462;&#22833;&#36133;<a onclick='getUserLocation();' style='color:blue;font-size:0.8125em;padding-left:15px;' href=''>&#26356;&#26032;</a>";$("#"+t).html(m_waitText);var i=window.setTimeout(function(){$("#"+t).html(n)},window.m_timeout);testGeolocation()&&navigator.geolocation.getCurrentPosition(function(o){var a=o.coords.latitude,s=o.coords.longitude;jQuery.get("/tuan/location.json",{latitude:a,longitude:s},bind(this,function(e,o){if(o.status)if(window.clearTimeout(i),o.cityId){var r=o.location.city+o.location.subCity,c=o.location.fullNames;testStorage()&&(setCityId(o.cityId),setLongitudeLatitude(a+","+s),setUserCity(r),setUserCityDetail(c)),c+="<span  style='color:blue;font-size:0.875em;padding-left:15px;' href=''>&#26356;&#26032;</span>",r+="<span  style='color:blue;font-size:0.875em;padding-left:15px;' href=''>&#26356;&#26032;</span>",e?$("#"+t).html(r):$("#"+t).html(c)}else $("#"+t).html(n)},e),"json")},function(){$("#"+t).html(n),window.clearTimeout(i)},{timeout:5e3}),o.preventDefault()}e?$("#"+e).click(bind(this,o,e)):$("#"+t).click(bind(this,o,e))}function registerUnloadEvent(t,e){document.body.onunload=function(){hideWait(t,e)}}function writeTipVal(t){""!=t&&($("#keyword").val(t),$("#shelper").html(""),$("#searchForm").submit())}function closeTip(){$("#shelper").html(""),$("#shelper").hide()}function searchTipContent(){var t=$("#keyword").val().trim();""==t?(old_keyword="",$("#shelper").html(""),$("#shelper").hide()):t==old_keyword||t==old_keyword2||($("#shelper").show(),$("#keyword").removeAttr("style"),t=$("#keyword").val().trim(),old_keyword=t,jQuery.get("/ware/searchTip.action?",{keyword:t},function(t){null!=t?$("#shelper").html(t):$("#shelper").html("")})),setTimeout("searchTipContent()",500)}function getCityId(){var t;return testLocalStorage()?t=window.localStorage.getItem(m_prefix+m_cityId):testSessionStorage()&&(t=window.sessionStorage.getItem(m_prefix+m_cityId)),t||0}function getUserCity(){var t;return testLocalStorage()?t=window.localStorage.getItem(m_prefix+m_userCity):testSessionStorage()&&(t=window.sessionStorage.getItem(m_prefix+m_userCity)),t||null}function getUserCityDetail(){var t;return testLocalStorage()?t=window.localStorage.getItem(m_prefix+m_userCityDetail):testSessionStorage()&&(t=window.sessionStorage.getItem(m_prefix+m_userCityDetail)),t||null}function getCategoryId(){var t;return testLocalStorage()?t=window.localStorage.getItem(m_prefix+m_categoryId):testSessionStorage&&(t=window.sessionStorage.getItem(m_prefix+m_categoryId)),t||0}function getLongitudeLatitude(){var t;return testSessionStorage()&&(t=window.sessionStorage.getItem(m_prefix+m_longitudeLatitude)),t||null}function setCityId(t){t&&(testLocalStorage()?window.localStorage.setItem(m_prefix+m_cityId,t):testSessionStorage()&&window.sessionStorage.setItem(m_prefix+m_cityId,t))}function setUserCity(t){t&&(testLocalStorage()?window.localStorage.setItem(m_prefix+m_userCity,t):testSessionStorage()&&window.sessionStorage.setItem(m_prefix+m_userCity,t))}function setUserCityDetail(t){t&&(testLocalStorage()?window.localStorage.setItem(m_prefix+m_userCityDetail,t):testSessionStorage()&&window.sessionStorage.setItem(m_prefix+m_userCityDetail,t))}function setCategoryId(t){t&&(testLocalStorage()?window.localStorage.setItem(m_prefix+m_categoryId,t):testSessionStorage()&&window.sessionStorage.setItem(m_prefix+m_categoryId,t))}function setLongitudeLatitude(t){t&&testSessionStorage()&&window.sessionStorage.setItem(m_prefix+m_longitudeLatitude,t)}function goTuanIndex(t){var e,o;try{e=getCityId(),o=getCategoryId()}catch(t){}return!!e||(e=0),!!o||(o=0),urlEncode("/tuan/index.html",t,[e,o,0,0,1])||"#"}function priceTransform(t){try{return parseFloat(t).toFixed(1)}catch(e){return t}return t}function getDiscount(t,e){var o=(t-e).toString();return o.indexOf(".")>0&&(o=o.substring(0,o.indexOf(".")+2)),o}function strlen(t){for(var e=0,o=0;o<t.length;o++){var n=t.charCodeAt(o);n>=1&&n<=126||65376<=n&&n<=65439?e++:e+=2}return e}function changePage(t,e){var o=document.paging;!!o.startSpinner&&o.startSpinner(),jQuery.get(t,{page:e},function(t){o.set("page",e),o.show(),o.callbackFun(t)},"json")}function Paging(t){document.paging=this,this.component=jQuery("#"+t.fillId),this.startSpinner=t.startSpinner,this.stopSpinner=t.stopSpinner,this.num=parseInt(t.num,10)||5,this.count=parseInt(t.count,10),this.page=parseInt(t.page,10),this.totalPage=parseInt(t.totalPage,10),this.message=t.message||"&#26242;&#26080;&#25968;&#25454;",this.url=t.url||"",this.callbackFun=t.callback1,this.isShowBotton=t.isShowBotton,this.isShowNum=t.isShowNum,void 0==this.isShowBotton&&(this.isShowBotton=!0),void 0==this.isShowNum&&(this.isShowNum=!0),this.set=function(t,e){this[t]=e},this.show=function(){if(this.component.empty(),this.count&&this.count>0){if(this.isShowBotton&&this.totalPage>1&&(this.page<=this.totalPage&&this.page>1?this.component.append('<a class="pre" onclick=changePage("'+this.url+'",'+(this.page-1)+");><span></span>&#19978;&#19968;&#39029;</a>"):this.component.append('<a class="dis-buttom"  "style=color:gray;">&#19978;&#19968;&#39029;</a>'),this.component.append("&nbsp;&nbsp;"+this.page+"/"+this.totalPage+"&nbsp;&nbsp;&nbsp;"),this.page<this.totalPage?this.component.append('<a class="next" onclick=changePage("'+this.url+'",'+(this.page+1)+")>&#19979;&#19968;&#39029;<span></span></a>"):this.component.append('<a class="dis-buttom" "style=color:gray;">&#19979;&#19968;&#39029;</a>'),this.component.append(" <br /><br />")),this.isShowNum&&this.totalPage>2)if(this.totalPage<this.num)for(var t=1;t<=this.totalPage;t++)this.page==t?this.component.append('<a  style="color:gray;">&nbsp;&nbsp;&nbsp;'+t+"&nbsp;&nbsp;&nbsp;</a>"):this.component.append('<a onclick=changePage("'+this.url+'",'+t+'); style="color:black;">&nbsp;&nbsp;&nbsp;'+t+"&nbsp;&nbsp;&nbsp;</a>");else{var e=Math.floor(this.num/2),o=this.totalPage-this.page,n=0,i=0;this.page<=e?(n=this.page-1,i=this.num-this.page):o>=e?(n=1&this.num?e:e-1,i=e):(n=this.num-o-1,i=o);for(var t=n;t>=1;t--)this.component.append('<a onclick=changePage("'+this.url+'",'+(this.page-t)+'); style="color:black;">&nbsp;&nbsp;&nbsp;'+(this.page-t)+"&nbsp;&nbsp;&nbsp;</a>");this.component.append('<a style="color:gray;">&nbsp;&nbsp;&nbsp;'+this.page+"&nbsp;&nbsp;&nbsp;</a>");for(var t=1;t<=i;t++)this.component.append('<a onclick=changePage("'+this.url+'",'+(this.page+t)+'); style="color:black;">&nbsp;&nbsp;&nbsp;'+(this.page+t)+"&nbsp;&nbsp;&nbsp;</a>")}}else this.component.append('<div class="item radius" style="margin-top:20px;">'+this.message+"</div>");this.component.append(" <br /><br />")}}function pageBack(){/#top/.test(window.location.href)?(window.history.go(-2),window.location.load(window.location.href)):(window.history.back(),window.location.load(window.location.href))}function backPassLoginPage(){"login"==window.name?(window.name="",window.history.go(-2)):window.history.back()}function clearHistory(){localStorage.removeItem("searchhistory"),$("#shelper").html(""),$("#shelper").hide()}function cancelHotWord(){$("#newkeyword").val(""),$("#newkeyword").focus()}function writeSuggestion(t){""!=t&&($("#newkeyword").val(t),$("#shelper").html(""),addSearchHistory(t),$("#searchForm").submit())}function closeSuggestion(){$("#shelper").html(""),$("#shelper").hide()}function searchSuggestionContent(){var t=$("#newkeyword").val().trim().replace(new RegExp(/<script>/g),"").replace(new RegExp(/<\/script>/g),"");if(""==t){search_old="",$("#shelper").html(""),$("#shelper").hide();var e=localStorage.getItem("searchhistory");if(null!=e)if(e.length>0){e=decodeURIComponent(e);var o=e.split("|");if(null!=o&&o.length>0){for(var n="<ul>",i=0;i<o.length;i++)""!=o[i]&&(n+="<li><a onclick=\"writeSuggestion('"+o[i]+'\')" href="javascript:void(0);" '+(search_old==o[i]?'class="on"':"")+">"+makeSearchName(o[i])+"</a></li>");n+='</ul><div class="new-tbl-type"><a href="javascript:void(0);" onclick="clearHistory()" class="new-tbl-cell">&#28165;&#38500;&#21382;&#21490;&#35760;&#24405;</a><span class="new-bar"></span><a href="javascript:void(0)" onclick="closeTip()" class="new-tbl-cell">&#20851;&#38381;</a></div>',$("#shelper").html(n),global_searbox_focus&&$("#shelper").show()}else $("#shelper").html(""),$("#shelper").hide()}else $("#shelper").html(""),$("#shelper").hide()}else t==search_old||t==search_old2||(t=$("#newkeyword").val().trim().replace(new RegExp(/<script>/g),"").replace(new RegExp(/<\/script>/g),""),search_old=t,jQuery.get("/ware/searchSuggestion.action?",{keyword:t},function(t){null!=t?($("#shelper").html(t),$("#shelper").show()):($("#shelper").html(""),$("#shelper").hide())}));setTimeout("searchSuggestionContent()",500)}function addSearchHistory(t){if(jQuery.trim(t).length>0){t=t.replace(new RegExp(/<script>/g),"").replace(new RegExp(/<\/script>/g),"");var e=t+"|",o=localStorage.getItem("searchhistory"),n=0;if(null!=o){o=decodeURIComponent(o);for(var i=o.split("|"),a=0;a<i.length&&a!=(0!=n?5:4);a++)t=makeSearchName(t),i[a]=makeSearchName(i[a]),i[a]!=t?e+=i[a]+"|":n++}localStorage.setItem("searchhistory",encodeURIComponent(e))}}function makeSearchName(t){return t.length>=30&&(t=t.substring(0,30)),t}function loadHB(t,e,o,n){var i=new MCommonHeaderBottom,a={hrederId:"m_common_header",title:o,sid:e,isShowShortCut:!1,selectedShortCut:"4"};i.header(a);var s="Item",r="view-ware",c=$("#resourceType").val(),l=$("#resourceValue").val();""!=c&&null!=c&&"unknown"!=c&&(s=c),""!=l&&null!=l&&"unknown"!=l&&(r=l);var u=$("#computControul").val();""!=u&&"true"==u&&"M_APP_SAOMA"!=c&&(r="MWEIXIN_PRODUCTFLOAT_VALUE",s="MWEIXIN_PRODUCTFLOAT_TYPE");var d="openApp.jdMobile://virtual",h={category:"jump",des:"productDetail",skuId:t,sourceType:s,sourceValue:r},p="http://h5.m.jd.com/active/download/download.html?channel=jd-msx",m="",f="http://h5.m.jd.com/active/download/download.html?channel=jd-msx";""!=t&&null!=t&&t>=1e7&&t<=19999999&&(d='openapp.jdebook://communication?params={"type":"1"}',h="",f="http://e.m.jd.com/jdread.html",p="http://e.m.jd.com/jdread.html",m="下载京东阅读客户端<br>精彩好书免费看");var g={downAppURl:p,downWeixin:f,inteneUrl:d,inteneUrlParams:h,noRecord:!0},w={tipId:"m_common_tip",sid:e,isfloat:!1,isAlwayShow:!0,downloadAppPlugIn:g,copyWrite:m,onClickTrynow:function(){},onClickTipX:function(){}};i.jdTip(w)}function _showMessage(){this.showing=!1,this.queue=[],this.popbox=null}function showMessage(t){_newMessage||(_newMessage=new _showMessage),_newMessage.show(t)}function showYYsMessage(t){var e,o=null,n={addHtml:function(){var e='<div class="message-floor" id="messageBox">';e+='<div class="messge-box">',e+='<div class="messge-box-icon"><i class="bottom-focus-icon '+t.cls+'"></i></div>',e+='<div class="messge-box-content">'+t.message+"</div>",e+="</div>",e+="</div>",$("body").append(e)},adjustHeight:function(){var o=document.documentElement.clientHeight;$(e).find(".messge-box")[0].style.marginTop=(o-t.height)/2+"px"},setInfo:function(){$(e).find(".messge-box-content").text(t.message),$(e).find(".messge-box").width(t.width+"px"),$(e).find(".messge-box").height(t.height+"px"),$(e).find(".bottom-focus-icon").attr("class","bottom-focus-icon "+t.cls)}};0==$("#messageBox").length&&n.addHtml(),e=document.getElementById("messageBox"),n.adjustHeight(),n.setInfo(),e.style.display="block",null!=o&&clearTimeout(o),o=setTimeout(function(){e.style.display="none",o=null},t.duration)}function addNumberShow(t){if(null!=t&&void 0!=t&&0!=t.length&&0!=t){var e=parseInt(t);e>99&&(e="99+");var o=$("#carNum");o.text(e),o.addClass("heart-fill-anim");var n=null;null!=n&&(clearTimeout(n),n=null),n=setTimeout(function(){$(o[0]).attr("class","order-numbers"),clearTimeout(n),n=null},1e3)}}function focusOnSC(){var t=document.getElementById("focusOn"),e={controlFocus:function(){var o=t.querySelector(".bottom-focus-icon"),n=o.className,i=null;-1==n.indexOf("focus-out")?(t.innerHTML=e.runOffHtml(),null!=i&&(clearTimeout(i),i=null),i=setTimeout(function(){t.innerHTML=e.emptyHeartHtml(),o.className=n.replace("focus-on","focus-out"),$(t).find(".bottom-focus-icon").removeClass("heart-fill-anim"),clearTimeout(i),i=null},1e3)):(o.className=n.replace("focus-out","focus-on"),$(t).find(".bottom-focus-icon").attr("class","bottom-focus-icon focus-on heart-fill-anim"),$(t).find(".focus-info").text("已关注"))},runOffHtml:function(){var t='<div class="focus-icon">';return t+='<i class="bottom-focus-icon focus-out-left"></i>',t+='<i class="bottom-focus-icon focus-out-right"></i>',t+="</div>",t+='<span class="focus-info">关注</span>'},emptyHeartHtml:function(){var t='<div class="focus-icon">';return t+='<i class="bottom-focus-icon focus-out"></i>',t+="</div>",t+='<span class="focus-info">关注</span>'}};return function(){e.controlFocus()}()}Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),o=1;o<arguments.length;o++){var n=arguments[o];if(void 0!==n&&null!==n){n=Object(n);for(var i=Object.keys(n),a=0,s=i.length;a<s;a++){var r=i[a],c=Object.getOwnPropertyDescriptor(n,r);void 0!==c&&c.enumerable&&(e[r]=n[r])}}}return e}});var ARRAY_WEEK_CN=["周日","周一","周二","周三","周四","周五","周六"],HTML5_DEFAULT_IMG_300x300="/images/html5/default_300x300.gif",HTML5_DEFAULT_IMG_220x220="/images/html5/default_220x220.gif";window.m_prefix="m.jd.com_",window.m_cityId="cityId",window.m_userCity="userCity",window.m_categoryId="categoryId",window.m_userCityDetail="userCityDetail",window.m_longitudeLatitude="longitudeLatitude",window.m_timeout=2e4,window.m_waitText="&#21162;&#21147;&#21152;&#36733;&#20013;&#46;&#46;&#46;";var addWare=function(t,e,o,n,i,a){if(isNotBlank(o)&&o){var s=$("#newOrderServer").val(),r="/cart/addDirOrder.json?wareId="+t+"&num="+e+(isNotBlank(o)&&o?"&isAjax="+o:"")+"&resourceType="+n+"&resourceValue="+i+(isNotBlank(a)&&""!=a?"&sid="+a:"");jQuery.get(r,function(){window.location.href="true"==s?"/norder/order.action?wareId="+t+"&enterOrder=true"+(isNotBlank(a)&&""!=a?"&sid="+$("#sid").val():""):"/order/order.action?wareId="+t+"&enterOrder=true&yys=false&from=0"+(isNotBlank(a)&&""!=a?"&sid="+$("#sid").val():"")})}else{var c=createSpinner();$("#spinner2").show(),c.spin($("#spinner2")[0]),$("#_mask")&&$("#_mask").remove();var l=(document.body||document.documentElement).clientHeight+20+"px",u=document.createElement("div");u.setAttribute("id","_mask"),u.setAttribute("style","position:absolute;left:0px;top:0px;background-color:rgb(20, 20, 20);filter:alpha(opacity=60);opacity: 0.6;width:100%;height:"+l+";z-index:9998;"),(document.body||document.documentElement).appendChild(u);var d="/cart/add.json?wareId="+t+"&num="+e+(isNotBlank(o)&&o?"&isAjax="+o:"")+"&resourceType="+n+"&resourceValue="+i+(isNotBlank(a)&&""!=a?"&sid="+a:"");ajax(d,function(t){c.stop(),$("#spinner2").hide();var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.clientHeight||document.body.clientHeight;document.getElementById("cart").style.bottom=(o-100)/2-e+"px";var n=JSON.parse(t).sid;$("#sid").val(n),$("#goCart").click(function(){$("#_mask").hide(),$("#cart").hide(),window.location.href="/cart/cart.action?sid="+n}),$("#cart").show()})}},xmlHttp,ajax=function(t,e,o){function n(){4!=xmlHttp.readyState&&"complete"!=xmlHttp.readyState||e.call(this,xmlHttp.responseText,o)}return 0==t.length?"":null!=(xmlHttp=function(){var t=null;try{t=new XMLHttpRequest}catch(e){try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}}return t}())&&(t=t+"&ran="+Math.random(),xmlHttp.onreadystatechange=n,xmlHttp.open("GET",t,!0),xmlHttp.send(null),!0)},addCart=function(t,e){var o=$("#resourceType").val(),n=$("#resourceValue").val();if(null!=o&&""!=o&&void 0!=typeof o||(o="unknown"),null!=n&&""!=n&&void 0!=typeof n||(n="unknown"),!testLocalStorage())return void(location.href=e?"/cart/add.action?sid="+e+"&wareId="+t+"&resourceType="+o+"&resourceValue="+n:"/cart/add.action?wareId="+t+"&resourceType="+o+"&resourceValue="+n);var i=window.localStorage.getItem("cartItem");if(null!=i)for(var a=JSON.parse(i),s=0;s<=a.length;s++){if(null!=a[s]&&a[s].id==t){a[s].num+=1;break}if(s==a.length){var r=new Object;r.id=t,r.num=1,r.resourceType=o,r.resourceValue=n,a[a.length]=r;break}}else{a=new Array;var r=new Object;r.id=t,r.num=1,r.resourceType=o,r.resourceValue=n,a[0]=r}window.localStorage.setItem("cartItem",JSON.stringify(a)),updateToolBar()},getCart=function(){if(testLocalStorage())return window.localStorage.getItem("cartItem")},clearCart=function(){testLocalStorage()&&(window.localStorage.removeItem("cartItem"),updateToolBar())},delCart=function(t,e,o,n){if(!testLocalStorage())return void(location.href=e?"/cart/remove.action?sid="+e+"&wareId="+t+"&num="+o:"/cart/remove.action?wareId="+t+"&num="+o);var i=window.localStorage.getItem("cartItem");if(null!=i){for(var a=JSON.parse(i),s=0;s<a.length;s++)if(a[s].id==t){a.splice(s,1);break}window.localStorage.setItem("cartItem",JSON.stringify(a))}n&&syncCart(e,!0),updateToolBar()},updateCart=function(t,e,o){if(!testLocalStorage())return void(location.href=o?"/cart/modify.action?sid="+o+"&wareId="+t+"&num="+e:"/cart/modify.action?wareId="+t+"&num="+e);var n=window.localStorage.getItem("cartItem");if(null!=n){for(var i=JSON.parse(n),a=0;a<i.length;a++)if(i[a].id==t){i[a].num=Number(e);break}window.localStorage.setItem("cartItem",JSON.stringify(i))}updateToolBar()},updateToolBar=function(t){if(testLocalStorage()){var e=0,o=window.localStorage.getItem("cartItem");if(null!=o){var n=JSON.parse(o);if(null!=n)for(var i=0;i<n.length;i++)e+=Number(n[i].num)}0!=e?($("#html5_cart_img").attr("src","/images/html5/cartm.png"),$("#html5_cart_img").attr("height","22"),$("#html5_cart_img").attr("width","26")):($("#html5_cart_img").attr("src","/images/html5/cart.png"),$("#html5_cart_img").attr("height","21"),$("#html5_cart_img").attr("width","22"))}},syncCart=function(sid,jump,callback){var sourceType=$("#resourceType").val(),sourceValue=$("#resourceValue").val();if(null!=sourceType&&""!=sourceType&&void 0!=typeof sourceType||(sourceType="unknown"),null!=sourceValue&&""!=sourceValue&&void 0!=typeof sourceValue||(sourceValue="unknown"),!testLocalStorage())return void(location.href=sid?"/cart/cart.action?sid="+sid+"&resourceType="+sourceType+"&resourceValue="+sourceValue:"/cart/cart.action?resourceType="+sourceType+"&resourceValue="+sourceValue);var paraJson=getCart();null==paraJson&&(paraJson=""),jQuery.get("/cart/update.json?sid="+sid,{updatejson:paraJson},function(data){if(""==sid&&(sid=data.sid),cartdata=eval("("+data.cartDetail+")"),refreshLocalCart(cartdata,sid),jump||null==getCart())location.href=sid?"/cart/cart.action?sid="+sid:"/cart/cart.action";else{var oriPrice=cartdata.price-cartdata.discount,realPrice=oriPrice-cartdata.rePrice;$("#cart_oriPrice").text(oriPrice.toFixed(2)),$("#cart_rePrice").text(cartdata.rePrice.toFixed(2)),$("#cart_realPrice").text(realPrice.toFixed(2)),$("#cart_totalnum").text(cartdata.num),null!=cartdata.message&&""!=cartdata.message?($("#pay_tip").text(cartdata.message),$("#pay_tip_div").show()):$("#pay_tip_div").hide()}null!=callback&&($("#sid").val(sid),callback())},"json")},refreshLocalCart=function(t,e){if(void 0!==t&&null!=t){if(null!=t.skus&&t.skus.length>0)for(var o=0;o<t.skus.length;o++)addCart(t.skus[o].Id,e),updateCart(t.skus[o].Id,t.skus[o].Num,e);if(null!=t.suits&&t.suits.length>0)for(var n=0;n<t.suits.length;n++)if(null!=t.suits[n].Skus&&t.suits[n].Skus.length>0)for(var o=0;o<t.suits[n].Skus.length;o++)addCart(t.suits[n].Skus[o].Id,e),updateCart(t.suits[n].Skus[o].Id,t.suits[n].Skus[o].Num,e);if(null!=t.gifts&&t.gifts.length>0)for(var o=0;o<t.gifts.length;o++)addCart(t.gifts[o].MainSku.Id,e),updateCart(t.gifts[o].MainSku.Id,t.gifts[o].MainSku.Num,e)}},old_keyword="",old_keyword2="";$(function(){$(".search input").attr("autocomplete","off"),jQuery("#keyword").length>0&&(old_keyword=$("#keyword").val().trim(),searchTipContent(),old_keyword2=old_keyword,$("#keyword").focus(function(){old_keyword2==$("#keyword").val().trim()&&$("#keyword").val("")}),$("#keyword").blur(function(){""==$("#keyword").val().trim()&&($("#keyword").val(old_keyword2),$("#keyword").attr("style","color:#999999;"))}))}),document.ontouchend=function(){$("#hideInput").remove(),$("#con_more").append('<label style="height:0px;font-size:0pt;" id="hideInput">&nbsp;</label>')},Date.prototype.dateAdd=function(interval,number){var d=this,k={y:"FullYear",q:"Month",m:"Month",w:"Date",d:"Date",h:"Hours",n:"Minutes",s:"Seconds",ms:"MilliSeconds"},n={q:3,w:7};return eval("d.set"+k[interval]+"(d.get"+k[interval]+"()+"+(n[interval]||1)*number+")"),d},Date.prototype.dateDiff=function(t,e){var o=this,n={},i=o.getTime(),a=e.getTime();return n.y=e.getFullYear()-o.getFullYear(),n.q=4*n.y+Math.floor(e.getMonth()/4)-Math.floor(o.getMonth()/4),n.m=12*n.y+e.getMonth()-o.getMonth(),n.ms=e.getTime()-o.getTime(),n.w=Math.floor((a+3456e5)/6048e5)-Math.floor((i+3456e5)/6048e5),n.d=Math.floor(a/864e5)-Math.floor(i/864e5),n.h=Math.floor(a/36e5)-Math.floor(i/36e5),n.n=Math.floor(a/6e4)-Math.floor(i/6e4),n.s=Math.floor(a/1e3)-Math.floor(i/1e3),n[t]};var getDate=function(t){var e=/^(\d{4})-(\d{2})-(\d{2})$/.exec(t),o=parseInt(e[1],10),n=parseInt(e[2],10)-1,i=parseInt(e[3],10),a=new Date;return a.setFullYear(o),a.setMonth(n),a.setDate(i),a},global_searbox_focus=!1,search_old="",search_old2="";$(function(){$(".search input").attr("autocomplete","off"),jQuery("#newkeyword").length>0&&(search_old=$("#newkeyword").val().trim().replace(new RegExp(/<script>/g),"").replace(new RegExp(/<\/script>/g),""),searchSuggestionContent(),search_old2=search_old,$("#newkeyword").focus(function(){global_searbox_focus=!0,search_old2==$("#newkeyword").val().trim().replace(new RegExp(/<script>/g),"").replace(new RegExp(/<\/script>/g),"")&&"no"!=$("#newkeyword").attr("cleardefault")&&$("#newkeyword").val("")}),$("#newkeyword").blur(function(){global_searbox_focus=!1,""==$("#newkeyword").val().trim()&&($("#newkeyword").val(search_old2),$("#newkeyword").attr("style","color:#999999;"))})),$("#btnJdkey")&&$("#btnJdkey").click(function(){"none"==$("#jdkey").css("display")?$("#jdkey").show():$("#jdkey").hide()});var t=window.location.href.replace(/(^http:\/\/)|(\/*$)/g,"");(t.indexOf("/")<0||t.split("/").length<=2&&t.indexOf("/index")>=0)&&$("#jdkey .new-tbl-cell").eq(0).children().addClass("on"),t.indexOf("/category/all.html")>-1&&$("#jdkey .new-tbl-cell").eq(1).children().addClass("on"),t.indexOf("/cart/cart.action")>-1&&$("#jdkey .new-tbl-cell").eq(2).children().addClass("on"),t.indexOf("/user/")>-1&&$("#jdkey .new-tbl-cell").eq(3).children().addClass("on"),$("#btnJdBox")&&$("#btnJdBox").click(function(){$("#_jdBox").hide(),$("#_jdSearch").show(),$("#newkeyword").focus()}),$("#_cancelSearch")&&$("#_cancelSearch").click(function(){closeSuggestion(),$("#_jdSearch").hide(),$("#_jdBox").show()}),$("#search_new").click(function(){var t=$("#newkeyword").val();t=t.replace(new RegExp(/<script>/g),"").replace(new RegExp(/<\/script>/g),""),addSearchHistory(t),$("#newkeyword").val(t),$("#searchForm").submit()}),$("#newkeyword").focus(function(){$("#shelper").html(""),$("#shelper").hide()})}),function(t){var e=function(){for(var e=$(t).height(),o=$("img[imgsrc]"),n=$(t).scrollTop(),i=0,a=o.size();i<a;i++){currentObj=$(o[i]);var s=currentObj.offset().top-e-200;parseInt(n)>=parseInt(s)&&(currentObj.attr("src",currentObj.attr("imgsrc")),currentObj.removeAttr("imgsrc"))}};$(function(){e()}),t.onscroll=e,t.onresize=e}(window),function(t){function e(){return""==r&&(r="#!"+c.mainStayId),r}function o(t){r=t}function n(){return t.location.hash}function i(){var t=n();return""==t||"#"==t||"#!"==t?"#!"+c.mainStayId:t}function a(t){return t.length>2&&0==t.indexOf("#!")?t.substring(2):""}function s(){var s=e(),r=i();if(!(s.indexOf("#!")<0||r.indexOf("#!")<0)&&(s!="#!"+c.mainStayId&&r!="#!"+c.mainStayId&&(document.getElementById(c.mainStayId).style.display="none"),document.getElementById(c.mainLayoutId))){var l=document.getElementById(c.mainLayoutId).getAttribute("style");l=null==l?"":l,document.getElementById(c.mainLayoutId).setAttribute("style",l+"width:200%;-webkit-transform:translate3d("+(r=="#!"+c.mainStayId?"-50%":"0px")+",0px,0px);"),document.getElementById(a(r)).style.display="",setTimeout(function(){document.getElementById(c.mainLayoutId).setAttribute("style",l+"width:200%;-webkit-transform:translateX("+(r=="#!"+c.mainStayId?"0px":"-50%")+");-webkit-transition:"+c.transitionDual+"s ease-out;transition:"+c.transitionDual+"s ease-out;")},10),setTimeout(function(){s!=r&&(document.getElementById(a(s)).style.display="none");navigator&&navigator.userAgent&&navigator.userAgent.toUpperCase(),document.getElementById(c.mainLayoutId).setAttribute("style",l),t.scrollTo(0,0)},1e3*c.transitionDual),o(n())}}var r,c={mainStayId:"mainStay",mainLayoutId:"mainLayout",transitionDual:.4};$(function(){if(o(t.location.hash),"onhashchange"in t&&(void 0===document.documentMode||document.documentMode>7)?t.onhashchange=s:t.onclick=function(){},$("#"+c.mainStayId)&&"none"!=$("#"+c.mainStayId).css("display")&&t.location.hash.indexOf("#!")>-1&&""!=t.location.hash&&t.location.hash!="#"+c.mainStayId){var e=t.location.href;e=e.substring(0,e.indexOf("#!")),t.history.pushState(null,"",e)}})}(window),function(t){var e;navigator&&navigator.userAgent&&(e=navigator.userAgent.toUpperCase()),$(function(){e.indexOf("ANDROID")>-1?$("body").addClass("a"):e.indexOf("IPHONE")>-1&&$("body").addClass("s")})}(window),$(function(){var t;navigator&&navigator.userAgent&&(t=navigator.userAgent.toUpperCase()),t&&t.indexOf("UC")>-1&&$("#toPcHome").hide()});var anima=function(t,e,o,n,i){var a=t/e,s=n-o,r=function(t){var n=o+t/e*s;i.apply(null,[t,n]),t<e&&setTimeout(function(){r(t+1)},a)};r(0)};_showMessage.prototype={checkQueue:function(){this.showing=!1,this.queue.length>0&&(this.show(this.queue[0],!0),this.queue.shift())},hide:function(){this.popbox.style.display="none",$("#messageBox").remove(),this.setting.closeCbfn&&"function"==typeof this.setting.closeCbfn&&this.setting.closeCbfn(),clearTimeout(this.timeout),this.timeout=null,this.checkQueue()},show:function(t,e){var o=this;o.setting=t,this.showing?e||this.queue.push(t):(this.showing=!0,this.addHtml(),this.setInfo(),this.popbox.style.display="block",this.popbox.style.visibility="hidden",this.adjustHeight(),this.popbox.style.visibility="visible",this.timeout=setTimeout(function(){o.hide()},o.setting.duration))},addHtml:function(){var t='<div class="message-floor" id="messageBox">';t+='<div class="messge-box">',t+='<div class="messge-box-icon"><i class="message-toast-icon '+this.setting.cls+'"></i></div>',t+='<div class="messge-box-content">'+this.setting.message+"</div>",t+="</div>",t+="</div>",$("body").append(t),this.popbox=document.getElementById("messageBox")},adjustHeight:function(){$(this.popbox).find(".messge-box")[0].style.marginTop=-$(this.popbox).find(".messge-box")[0].offsetHeight/2+"px",$(this.popbox).find(".messge-box")[0].style.marginLeft=-$(this.popbox).find(".messge-box")[0].offsetWidth/2+"px"},setInfo:function(){$(this.popbox).find(".messge-box-content").html(this.setting.message),$(this.popbox).find(".messge-box").width(this.setting.width+"px"),$(this.popbox).find(".messge-box").height(this.setting.height+"px"),$(this.popbox).find(".bottom-focus-icon").attr("class","bottom-focus-icon "+this.setting.cls)}};var _newMessage=null,JDService={get:function(t,e,o,n,i){return $.ajax({url:t,type:"get",dataType:"json",data:e||{},success:o||function(){},error:n||function(){},timeout:i||0})},post:function(t,e,o,n){return $.ajax({url:t,type:"post",dataType:"json",data:e||{},success:o||function(){},error:n||function(){}})}};!function(t){"use strict";var e;t.JDUtil=e={checkLogin:function(){return $("#pin").length>0&&"login"==$("#pin").val()},doLogin:function(t,e){
var o=window.location,n=o.protocol,i=n+"//passport.m.jd.com/user/login.action",t="returnurl="+encodeURI("string"==typeof t?t:window.location.href);void 0===e&&$("#sid").length>0?i+="?sid="+$("#sid").val()+"&"+t:i+="?"+t,window.location.href=i},getCookieAll:function(){var t=document.cookie,e={},o=null;return t?(o=t.split(";"),$.each(o,function(t,o){var n=o.split("="),o=$.trim(o);n.length>=2&&(e[$.trim(n[0])]=o.split(/^[\w]+=/gi)[1])}),e):o},getCookie:function(t){var o=document.cookie,n=e.getCookieAll();return o?t?unescape(n[t])||null:n:null},setCookie:function(t,e,o,n){var i=$.trim(t)+"="+escape($.trim(e));if(o&&o>0){var a=new Date;a.setDate(a.getDate()+o),i+=";expires="+a.toGMTString()}n&&(i+=";path="+n),document.cookie=i},delCookie:function(t){var e=new Date;e.setTime(e.getTime()-1),document.cookie=t+"=; expires="+e.toGMTString()},before:function(t,e,n){return o(t,e,n,null)},after:function(t,e,n){return o(t,e,null,n)},wrapper:function(t,e,n,i){return o(t,e,n,i)},complie:function(t){return template.compile(t)},render:function(t,o){return e.complie(t)(o)},adujstData:function(t){if(t>=1e6)return"100万+";if(t>=1e4&&t<1e6){var e=Math.floor(t/1e4),o=Math.floor((t-1e4*e)/1e3),n=t-1e4*e-1e3*o;return 0==o?e+"万":(o+=Math.round(n/1e3),e+o/10+"万")}return t},adujstDataAccurate:function(t){if(t>=1e4){var e=Math.floor(t/1e4),o=Math.floor((t-1e4*e)/1e3),n=t-1e4*e-1e3*o;return 0==o?e+"万":(o+=Math.round(n/1e3),e+o/10+"万")}return t},pingClickWithLevel:function(t,e){var o=[];e instanceof Array||"object"!=typeof e?e instanceof Array&&(o=e):o.push(e);try{var n=new MPing.inputs.Click(t);if(o.length>0)for(var i=0;i<o.length;i++){var a=o[i];n[a.key]=a.value}(new MPing).send(n)}catch(t){}}};var o=function(t,e,o,i){var a,s,r=$.isFunction(t);if(r?(a=t,i=o,o=e):a=t[e],s=a,$.isFunction(o)){s=n(o,s,1);for(var c in a)s[c]=a[c]}if($.isFunction(i)){s=n(s,i,0);for(var c in a)s[c]=a[c]}return r||(t[e]=s),s},n=function(t,e,o){return function(){var n=t.apply(this,arguments),i=e.apply(this,arguments);return 0==o?n:i}}}(window);